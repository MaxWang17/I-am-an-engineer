{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["import { set } from \"lodash\";\r\n\r\nclass Observer {\r\n    constructor(value) { // 对Value这个属性重新定义\r\n        this.walk(value)\r\n    }\r\n    walk(data) {\r\n        Object.keys(data).forEach(key => {\r\n            defineReactive(data, key, data[key]);\r\n        })\r\n    }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            console.log('get')\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            console.log('set')\r\n            if (newValue === value) return;\r\n            value = newValue;\r\n        }\r\n    })\r\n\r\n}\r\n\r\nexport function observe(data) {\r\n    // 只对对象类型进行观测 \r\n    if (typeof data !== 'object' || data == null) {\r\n        return;\r\n    }\r\n    // 通过**类**实现数据观测（类拓展性好，且可产生有唯一标识的实例）\r\n    return new Observer(data)\r\n}","import { observe } from \"./observe/index\";\r\n\r\n// Vue的数据有data，methods，watch......\r\nexport function initState(vm) {\r\n    // 将所有数据都定义在vm上，并后续更改要触发视图更新。\r\n    const opts = vm.$options;\r\n    // 以下均为初始化\r\n    if (opts.props) {\r\n\r\n    }\r\n    if (opts.methods) {\r\n\r\n    }\r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n    if (opts.computed) {\r\n\r\n    }\r\n    if (opts.watch) {\r\n\r\n    }\r\n}\r\n\r\nfunction proxy(vm,source,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[source][key]\r\n        },\r\n        set(newValue){\r\n            vm[source][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    // 数据劫持 Object.defineProperty\r\n    let { data } = vm.$options\r\n    // 对data类型进行判断，函数就直接执行后获取其返回值作为数据（顺便绑定了一下实例）\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data;\r\n    // vm._data.name === vm.name\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n    // 观测数据\r\n    observe(data)\r\n}","import { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options\r\n        // 初始化状态\r\n        initState(vm)\r\n    }\r\n}\r\n\r\n","import { options } from \"_colorette@1.2.1@colorette\"\r\nimport { initMixin } from \"./init\"\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\n\r\nexport default Vue"],"names":["Observer","value","walk","data","Object","keys","forEach","key","defineReactive","defineProperty","get","console","log","set","newValue","observe","initState","vm","opts","$options","props","methods","initData","computed","watch","proxy","source","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}
